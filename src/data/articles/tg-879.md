🧵 후사카(Fusaka) 업그레이드 완벽 정리

오는 12월 3일 실행되는 이더리움의 후사카 업그레이드에서는 어떤 개선이 이뤄지고, 사용자 및 빌더들은 어떤 이점을 얻을 수 있을까요?

후사카 업그레이드는 이더리움 재단의 세 가지 핵심 목표에 맞게 설계됐습니다.

1️⃣ L2 스케일링

2️⃣ L1 스케일링

3️⃣ UX 개선

각 목표에 속하는 EIP들에 대해 문제 정의부터 해결 방식까지, 자세히 알아보겠습니다.

1/ L2 스케일링

EIP-7594: PeerDAS를 통한 L2의 8배 스케일링

PeerDAS는 블롭 데이터를 네트워크 전체가 나눠 저장하도록 설계된, 후사카의 핵심 업그레이드입니다.

기존엔 모든 노드가 블롭 전체 데이터를 가지고 있어야 했지만, PeerDAS는 리드-솔로몬 인코딩을 통해 블롭 데이터를 128개 조각으로 분산시켜, 각 노드가 일부만 저장하도록 만들죠.

그 결과 노드당 대역폭 사용량이 8배 줄고, 블롭 용량은 이론상 8배 확장됩니다. 이를 기반으로 L2는 내년 1월 초까지 약 800~1000 TPS, 장기적으로 여러 개선을 더하면 내년 말 즈음 10,000 TPS까지 처리할 수 있게 될 것으로 예상됩니다.

EIP-7892: 블롭 개수만 변경하는 하드포크를 만들 순 없을까?

PeerDAS가 도입되어도, 블롭 개수는 한 번에 8개로 증가하지 않습니다. 네트워크의 안정성을 위해 블롭 개수를 점진적으로 늘려야 하죠. 이를 위해, 다른 업데이트 없이 블롭 파라미터만 조정하는 ‘미니 하드포크’인 BPO가 도입됩니다.

예정된 BPO는 두 개입니다.

- BPO-1(12월 17일): 블롭 타겟 6 -> 10

- BPO-2(1월 7일): 블롭 타겟 10 -> 14

이를 통해 L2들은 최대 1000 TPS까지 안정적으로 견딜 수 있게 됩니다.

EIP-7918: 고장난 블롭 수수료 시장을 고치자

현재 블롭 수수료는 수요 변화에 비탄력적으로 반응해 가격 조정이 잘 일어나지 않고, 계속 최저선인 1 wei 수준에 머물러 있습니다. EIP-7918은 이 문제를 해결하기 위해 블롭 기본 수수료에 하한선을 설정합니다. 수치는 현재 L1 수수료의 16분의 1 수준입니다. 

이 하한선 덕분에 블롭 시장은 더욱 효율적인 가격 발견이 가능해집니다. 블롭의 비용이 증가한다는 단점이 존재하지만 이로 인한 UX 악화는 거의 없으며, 실제 롤업 사용자 입장에서는 데이터 비용이 0.002원 → 0.003원 수준으로 미미하게 오르는 정도입니다.

한편 블롭 가스비가 올라가면, ETH 소각량 역시 증가할 수 있습니다. 현재 수준으로는 미미하나, 이더리움이 엔드게임인 댕크샤딩으로 다가갈수록 소각량은 유의미하게 커질 수 있을 것이라고 보여집니다.

2/ L1 스케일링

EIP-7823 & EIP-7883: MODEXP 안정화

MODEXP 프리컴파일의 입력값과 가스비를 재조정해 L1 스케일링 시 발생할 수 있는 엣지 케이스를 방지합니다.

MODEXP는 어떤 수를 거듭제곱한 뒤, 특정 수로 나눈 나머지를 구하는 연산입니다. 이는 솔리디티로 구현 시 너무 가스비가 많이 들기 때문에, 2017년 프리컴파일 컨트랙트를 통해 오프체인에서 처리하도록 구현되었죠. 다만, 이 연산의 복잡성과 비효율성으로 인해 합의 클라이언트 및 zkEVM에서 엔지니어링 난이도가 상승하였고, DoS 공격의 가능성도 존재한다는 문제가 있었습니다.

EIP-7823은 입력값 길이를 8192비트로 제한해 비정상 입력으로 인한 버그를 막습니다. EIP-7883은 과소평가된 CPU 연산비를 고려해, 프리컴파일 호출 비용을 늘리는 방식으로 DoS 리스크를 제거하죠.

이로 인해 일부 ZK 관련 컨트랙트 검증 비용은 약 2% 정도 늘어날 수 있지만, 네트워크 안정성은 크게 향상됩니다.

EIP-7825: 트랜잭션에 크기 제한을 두자

한 트랜잭션이 블록 전체를 차지하지 못하도록, 트랜잭션당 가스 리밋을 16,777,216으로 제한합니다.

EIP-7825는 이후 업그레이드에서 도입될 병렬 검증(BAL)과 zkEVM 증명 생성 과정에서 발생할 수 있는 병목을 방지하기 위한 제안입니다. BAL과 zkEVM은 모두 트랜잭션 단위로 병렬 처리를 수행하지만, 트랜잭션이 지나치게 커지면 병렬화의 이점을 살릴 수 없습니다. 이러한 구조적 한계를 악용한 공격을 막기 위해, EIP-7825는 트랜잭션 크기에 상한을 두었습니다.

실제 이더리움 트랜잭션들의 99.96%는 이 제한보다 작은 크기이기 때문에, 기존 앱들은 거의 영향을 받지 않는다고 볼 수 있습니다.

EIP-7934: 블록에 크기 제한을 두자

블록 크기가 커지면 합의 지연과 네트워크 부하가 발생할 수 있습니다. EIP-7934는 블록 크기를 최대 8MB로 제한해 네트워크 안정성을 확보합니다.

이는 향후 L1 확장 과정에서의 안전한 상한선 역할을 합니다.

EIP-7642: 머지 이전의 데이터 때문에 발생하는 비효율을 개선하자

지난 5월 실행된 '부분 기록 만료'로 머지 이전 과거 데이터를 보존하지 않는 노드들이 늘면서, 동기화(싱크)나 피어 간 통신 비효율이 발생했습니다.

EIP-7642는 노드가 자신의 블록 범위를 명시적으로 알리는 기능과, 트랜잭션 영수증에서 불필요한 블룸 필터 전송 제거를 통해 P2P 리소스를 최적화합니다. 이로써 네트워크 전송 효율이 크게 개선됩니다.

EIP-7935: L1을 33% 더 스케일링하자

이더리움은 9년 만에 블록 가스 리밋을 올리기 시작했고, 현재 이더리움의 가스 리밋은 30M에서 50% 증가한 45M입니다. EIP-7935는 각 클라이언트의 기본값을 60M으로 통일해, 사회적 합의 기반의 불균형한 조정을 프로토콜 레벨에서 표준화합니다.

그 결과, 후사카 업그레이드 때 바로 33%만큼의 L1 확장성 향상이 가능해지게 됩니다.

3/ UX 개선

EIP-7917: 누가 프로포저가 될지 미리 알 수 있다면?

EIP-7917은 이더리움에서 누가 블록을 제안할지 6~12분 전에 미리 알 수 있게 하는 업데이트입니다.

이 정보는 기반 사전확인(Based Preconfirmation) 프로토콜의 핵심입니다. 기반 사전확인 프로토콜은 미래 프로포저가 사용자에게 '너의 트랜잭션을 미래 블록에 넣어서 실행해줄게. 결과는 이거야'라는 약속을 제공합니다. 이 약속을 기반으로, 사용자는 트랜잭션을 제출하자마자 “확정된” 듯한 UX를 느낄 수 있게 되죠. Commit-Boost와 결합하면, 트랜잭션이 실제 블록에 포함되기 전 수십 밀리초 단위로 컨펌되는 경험이 가능해집니다.

그러나 '누가 미래의 프로포저가 될지'는 이전까지 여러 엣지 케이스로 인해 결정론적이지 못했습니다. EIP-7917는 이를 결정론적으로 만들며, 사전확인 프로토콜의 약속은 이를 기반으로 더 신뢰도를 높일 수 있게 됩니다.

EIP-7939: 특정 연산 비용을 더 저렴하게

EVM에 비트 앞의 0 개수를 계산하는 CLZ 명령어가 추가됩니다.

기존 log₂ 등 복잡한 수학 연산을 컨트랙트 위에서 구현하려면, 데 브루잉 상수와 룩업 테이블을 활용하는 수십 줄의 코드가 필요했습니다. 그러나 EIP-7939를 통해, 이를 단일 명령으로 해결할 수 있게 됩니다. '비트 앞의 0 개수를 계산하는' 연산의 효율성도 약 36배 증가하게 되었죠.

이는 수학적 계산 뿐만 아니라 압축과 같은 사례에서도 유용하게 사용될 수 있으며, 이 경우 입력값에 따라 최대 몇천 가스 정도의 가스 효율성 개선을 할 수 있게 됩니다.

뿐만 아니라 CLZ 연산은 ZK 친화적이기 때문에, 관련된 ZK 증명 생성 속도 역시 개선될 수 있습니다.

EIP-7951: 패스키 프리컴파일

EIP-7951을 통해 패스키 기반 서명을 온체인에서 직접 검증하는 작업이 매우 저렴해집니다. 이는 P-256(secp256r1) 서명 알고리즘을 프리컴파일로 지원하는 방식이죠.

Base, Arbitrum, OP 등 L2에서 먼저 실험된 RIP-7212를 메인넷에 통합하는 형태라고도 볼 수 있습니다. 이제 이더리움 L1 위에서도 패스키 기반 스마트월렛 UX가 본격적으로 확장될 시점입니다.

🏁 결론

후사카 업그레이드는 L2 처리량 8배, L1 효율 33% 향상, UX 혁신을 동시에 달성하는 종합 개선안입니다.

이 업그레이드로 이더리움은 개인 사용자뿐 아니라 기관급 트래픽까지 수용 가능한 L2 생태계의 시대로 나아가게 됩니다.

Medium / Twitter