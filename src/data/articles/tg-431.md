[L2 스케일링 - PeerDAS]

1. 현 상황: 계속 스케일링을 해야 한다

Pectra 업그레이드를 통해 이더리움 L2의 확장성이 두 배 증가한 상황이기는 하나, 이에 따른 L2들의 트랜잭션 수 증가로 블롭의 남은 공간은 빠르게 소모되고 있습니다. 현재 새롭게 들어온 블롭 공간의 30% 가량이 벌써 찬 상황입니다.

즉, 이더리움은 L2 스케일링을 위해 계속해서 노력해야 합니다.

2. 다음 스텝: PeerDAS

다음에 올 Fusaka 업그레이드의 중점은 PeerDAS라고 불리는 L2 스케일링 솔루션입니다. 이는 현재 이더리움 밸리데이터들의 리소스 부담을 증가시키지 않으면서, L2의 용량을 8배까지 늘릴 수 있는 솔루션 입니다. (8배면 L2들의 총 TPS는 3,500까지 도달할 수 있습니다)

3. PeerDAS의 원리

PeerDAS는 블롭을 64개의 조각을 잘게 쪼개서 밸리데이터들끼리 나누어 갖는 메커니즘입니다. 이후 조각들을 다시 맞추면 원래의 블롭을 복구해낼 수 있는 것이죠.

그런데, 여기서 일부 밸리데이터가 공모를 하거나 실수로 조각을 누락한다면, 원본 데이터를 복구해낼 수 없게 됩니다. 이를 해결하기 위해 PeerDAS에서는 erasure coding이라는 것을 적용해 128개의 조각으로 확장합니다. Erasure coding은 주어진 데이터를 두 배로 늘리지만, 순서와 상관 없이 해당 데이터의 절반에 해당하는 조각들만 있으면 원본 데이터의 복구가 가능하도록 하는 기술입니다. 이를 활용해 밸리데이터 일부가 조각을 누락하는 상황에서도 문제 없이 블롭 원본 데이터를 복구할 수 있도록 하는 것입니다.

각 밸리데이터는 128개의 조각 중 최소 16개의 조각만 들고 있어도 되므로 이전보다 들고 있어야 하는 데이터의 크기가 8배 감소합니다. 다시 말하면, 기존보다 8배 더 큰 처리량도 감당할 수 있다는 의미이죠. 현재 Pectra의 블롭 타겟이 6개이니, 이를 48개로 증가시킬 수 있다는 의미기도 합니다.

4. PeerDAS의 빠른 shipping을 위한 노력

원리는 간단하게 보일 수 있으나, 실제 48개의 블롭을 감당하려면 다음과 같은 여러 가지 테크닉이 더 필요하며, 이를 위한 스펙과 구현이 완료되지 않았습니다. 

- 블롭 원본을 전부 들고, 이에 대한 증명을 빠르게 계산하여 네트워크에 전파하는 슈퍼 노드

- CL에서 블롭이 전파되길 기다리기보다, EL 멤풀에서 블롭을 미리 가져와 대기 시간을 줄이는 테크닉 등

현재 어느 시점에 와 있는지가 궁금하시다면, 아래 블로그와 리포트를 참고 바랍니다!

- OP Labs Blog

- Sunnyside Devnet Report 1

- Sunnyside Devnet Report 2

- Sunnyside Devnet Report 3