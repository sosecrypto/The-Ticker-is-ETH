이더리움 롤업의 두가지 새로운 방향성 : Based rollup & Native rollup

Native Rollup에 대한 내용이 공유된 김에 이전에 작성했던 포스트를 끌어올려 보겠습니다.

1. Based rollup : L2의 시퀀싱(트랜잭션 선별 및 정렬)을 L1 이더리움의 밸리데이터에게 넘기는것.

정리

- 현재 이더리움의 PBS 구조에서 블록 빌더들이 L2 시퀀싱을 수행해 L1블록에 이를 포함하고, 사전에 합의된 밸리데이터(proposer)에게 전달해 제안하는 형태.

- 이렇게 되면 L2의 블록 시간이 이더리움의 블록타임인 12초로 제약이 생기기에 이를 개선하기 위한 pre-confirmation(Preconf) 프로세스가 필요함.

- Preconf : L1의 proposer가 L2트랜잭션을 포함시킬 것이라는 사전 약속. 이는 EigenLayer나 Symbiotic과 같은 리스테이킹 레이어를 기반으로 구현.

- Taiko는 지금도 Based rollup으로 동작하고 있으며, Puffer의 UniFi가 Based rollup으로 만들어지고 있음

- L2 트랜잭션의 based fee는 L2에서 먹고 priority fee와 시퀀싱으로 인한 MEV 수익은 이더리움 L1에서 가져가게됨.

장점

- L2의 중앙화된 시퀀서가 MEV를 독점하는 문제를 해결

- 중앙화된 시퀀서에 의한 검열의 문제를 해결할수 있음

- 이더리움 L1이 L2 네트워크 수익을 공유받게됨.

단점

- L2가 독점하고 있는 시퀀싱 수입을 과연 L1과 쉽게 나누려 할지?

- 이더리움 밸리데이터의 더 많은 수가 이를 수용하고 사이드카(Commit-boost)를 도입해야 정상적으로 돌아갈수 있음.

- L2의 L1 Blob 사용이 과하게 발생하며, 현재의 제한된 이더리움 Blob에서는 빠르게 적용하기 어려움

- 리스테이킹 레이어의 슬래싱을 기반으로 구현될 preconf의 경제적 신뢰 문제 (만약 패널티를 받더라도 MEV를 도둑질해서 얻을수 있는 보상이 더 크다면?)

2. Native rollup: 롤업 트랜잭션을 L1에서 직접 검증 가능하도록 하는것

정리

- 이더리움 L1이 모든 롤업들의 상태 데이터를 가지고 있을수 없기에 상태 없이도 트랜잭션의 검증이 가능하게끔 해야함.

- 즉, 핵심은 "Stateless verification"을 가능하게 하는것.

- 이를 가능하게 하기위해 이더리움의 OPCODE에 EXECUTE를 추가.

- EXECUTE를 사용하면 트랜잭션 실행에 대한 trace와 상태 변화에 대한 정보를 가지고 롤업의 전체 상태 데이터가 없더라도 L1의 밸리데이터들이 L2의 트랜잭션을 직접 검증할수 있음.

- 장기적으로는 이를 SNARK (ZK Proof)기반으로 전환해 더 가볍고 빠르게 구현

장점

- 롤업들의 Real-time settlement가 가능해짐. 장기적으로 이더리움 1개 슬롯만에 롤업의 입출금이 가능해지며, 이는 이더리움 롤업간의 상호운용성을 달성할수 있게 함.

- 롤업의 검증을 위한 복잡한 절차(Fraud Proof 등)가 필요없어짐

- L2들과 L1이 완전히 동일해지는 EVM-equivalent의 달성.

- L2가 L1의 포크를 자동으로 따라가게됨

- L2의 클라이언트 다변화가 자연스럽게 달성됨

단점

- 아직 개념만 있을 뿐 실제로 구현되기까지는 한참 남았음

- 여러 차례의 L1포크를 동반하는 업그레이드가 필요

- L1의 처리 부담이 증가함

- EVM과 완전히 동일한 롤업들만 적용이 가능함. (StarkNet같은 Non-EVM은 불가능)

정리하자면,

Based rollup은 이더리움 L1이 롤업들의 시퀀싱을 대신 처리.

이를 통해 중앙화된 L2시퀀서의 검열문제와 MEV독점을 해결할수 있고, 이더리움이 L2의 수익을 나눠받을수 있음.

Native rollup은 이더리움 L1에서 롤업의 트랜잭션 실행에 대한 검증을 처리.

이를 통해 롤업은 이더리움과 사실상 한몸처럼 동작할수 있으며, 롤업간 상호운용성도 달성할수 있음.

설명한 것처럼 Based rollup과 Native rollup은 전혀 다른 개념이며, 이를 둘다 적용하는 롤럽을 Ultrasound rollup 이라고 함.

원문 트윗