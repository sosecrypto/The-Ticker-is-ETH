플래시봇이 네트워크 단의 익명화 네트워크인 Flashnet을 발표했습니다. 일종의 ‘이더리움 트랜잭션용 토르 네트워크’라고 보면 될 것 같고, 플래시봇의 '탈중앙화 블록 빌딩' 비전의 일부로 볼 수 있을 듯 합니다.

[Flashnet은 왜 나왔는가?]

이더리움 내 자산 전송의 프라이버시는 토네이도 캐시나 레일건과 같은 온체인 프라이버시 프로토콜에 의해 지켜질 수 있지만, 트랜잭션이 멤풀에 들어가기 전, 네트워크 단에서는 프라이버시가 잘 지켜지지 않습니다. RPC 노드는 누가 어떤 IP로 어떤 트랜잭션을 보냈는지 알 수 있으며, 이를 기반으로 발신자의 위치나 신원을 특정할 수 있습니다. 즉, 트랜잭션을 제출하는 순간의 메타데이터가 노출된다는 문제가 있죠.

이런 이슈를 방지하기 위해 기존에 토르 네트워크나 Mixnet과 같은 익명화 툴을 사용할 수 있지만, 이들 역시 한계를 가집니다. 토르 네트워크는 비교적 빠르고 대역폭 효율이 높지만, 글로벌 네트워크 감시자나 일부 릴레이 노드가 장악된 상황에서는 타이밍 분석 등을 통해 익명성이 약화될 수 있습니다. Mixnet은 더 강한 익명성을 제공하지만, 메시지를 의도적으로 지연하여 혼합하는 구조 때문에 레이턴시가 커져 디파이와 같이 속도가 중요한 환경에서는 사용이 어렵다는 단점이 있습니다.

[Flashnet은 무엇인가?]

구조적으로 Flashnet은 단순히 트래픽을 여러 노드로 우회시키는 방식이 아니라, 여러 사용자가 동시에 암호학적으로 메시지를 섞는 방식(DC-net 계열)에 가깝습니다. 각 사용자는 TEE를 운영하며, 자신의 트랜잭션을 무작위 위치에 삽입한 뒤 이를 비밀 공유(secret sharing) 형태로 여러 서버에 나눠 전송합니다. 서버들은 각 사용자의 조각들을 합산해 최종 결과만 복원합니다. 즉, 최종 결과만 보면 각 트랜잭션이 어떤 TEE에서 왔는지 알 수 없기 때문에, 개별 트랜잭션과 송신자를 연결할 수 없도록 설계되어 있습니다.

Flashnet은 시스템의 안정성을 보장하기 위해 TEE를 활용하지만, 익명성은 여러 사용자가 자신의 메시지를 무작위 위치에 삽입한 뒤 이를 집합적으로 합산하는 구조(DC-net 계열)에서 옵니다. 즉, TEE는 사용자가 이 비밀 공유 과정을 올바르게 수행했는지를 보장해 시스템이 무너지지 않도록 하는 역할을 하며, 익명성이 TEE에 의존하지는 않는 구조입니다. 물론 TEE 자체도 익명성 보장에 꽤 좋은 툴이며, 대부분의 플래시봇 인프라들이 TEE에 의존하고 있긴 하나, 익명성에 대해 하드웨어보다 더 나은 가정을 주는 프로덕트를 구축하고 싶었던게 아닌가 싶네요.

[플래시봇의 의도는 무엇인가]

이더리움은 현재 PBS 구조 아래에서 블록을 생산하고 있으며, 이 과정에는 사용자, 오더플로우 제공자, 서처(searcher), 빌더, 릴레이, 검증자 등 다양한 주체가 관여합니다. 블록 빌딩이 점점 더 복잡해질수록, 중간 단계에서의 정보 노출은 곧 시장 권력으로 이어집니다.

Flashbots는 BuilderNet을 통해 블록 빌딩을 더 분산화하려는 비전을 제시해 왔습니다. 하지만 참여자가 늘어나고 프로토콜이 복잡해질수록 네트워크 차원의 프라이버시가 확보되지 않으면, 특정 참여자를 배제하거나 검열하는 문제가 생길 수 있습니다.

Flashnet은 이 실행 파이프라인을 익명화함으로써, 더 많은 참여자가 신원 노출 없이 블록 빌딩 과정에 기여할 수 있게 하는 기반 기술입니다. 

이는 기존 플래시봇이 만들던 BuilderNet과도 상호보완적인 관계라고 볼 수 있습니다. BuilderNet의 TEE 블록 빌딩은 ‘오더플로우 프라이버시’를 지켜주기는 하나, 네트워크 단 검열을 막을 순 없습니다. 즉, BuilderNet 운영자들은 특정 오더플로우의 IP를 보고, 이를 TEE 앞단에서 의도적으로 검열해버리는 방식으로 특정 이득을 취할 수 있죠. 만약 오더플로우가 Flashnet을 통해서 온다면, 이러한 검열은 BuilderNet TEE가 해킹되지 않는 한 불가능해지게 됩니다.

즉, Flashnet은 플래시봇의 완전 탈중앙화 블록 빌딩 비전의 한 구성 요소가 될 수 있습니다.

[한계 및 평가]

그러나, Flashnet은 각 유저가 TEE를 직접 운영한다는 가정 하에 설계되어 있습니다. 그러나 현실적으로 그럴 순 없으며, 실제론 지갑 등의 인프라 운영자가 TEE를 운영하여, 해당 인터페이스를 통해 들어오는 오더플로우를 Flashnet에 보내는 형태일 것으로 생각됩니다. 이 경우, 프라이버시의 신뢰 가정이 TEE 운영자로 이동하게 됩니다. 즉, 이론적으로는 네트워크 상에서 송신자와 트랜잭션을 분리할 수 있지만, 사용자가 연결하는 지갑 혹은 인프라 사업자는 여전히 사용자의 원본 트랜잭션과 IP를 볼 수 있을 수 있는 구조죠.

다만 현재도 대부분의 사용자는 RPC 노드나 지갑 사업자가 자신의 트랜잭션을 검열하지 않고, 악용하지 않을 것이라는 가정 하에 네트워크를 사용하고 있습니다. Flashnet을 사용하면 오히려 블록 빌더, 릴레이, 중간 인프라 단계에서의 네트워크 기반 검열 가능성을 줄여준다는 점에서, 신뢰를 한 지점(지갑/RPC)으로 좁히는 효과가 있습니다.

[비탈릭의 코멘트]

비탈릭은 이렇게 낮은 레이턴시로 프라이버시를 제공할 수 있는 툴이 필요하다고 이야기하면서도, TEE에 라이브니스 가정을 맡기는 것보다, 담보 예치 및 슬래싱을 기반으로 한 암호경제적 아키텍처를 구축하는 것이 어떠냐고 제안합니다. 이 역시 큰 금액이 필요하다는 점에서 현실적으로 개인 사용자의 접근성을 개선하진 못할 것으로 생각되나, TEE로 이뤄진 네트워크를 구축하는 것보다 엔지니어링 측면의 공수가 덜 들 수 있으며, 서버 운영자의 개발자 경험이 나아질 수 있을 듯 하네요.

플래시봇의 ‘탈중앙화 블록 빌딩’ 비전이 어떤 프로덕트로 이어질지, 이게 이더리움의 중립성에 어떤 영향을 미칠지 지켜봐도 좋을 것 같습니다!

출처