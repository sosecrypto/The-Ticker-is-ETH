이더리움을 더 가볍게 : State Expiry 첫 벤치마크

원문 X 아티클

Geth 팀이 메인넷 데이터로 State Expiry 벤치마크를 수행했다. 

상태 크기가 77.5% 감소했으며, 블록 처리 속도가 15~21% 개선되었다.

실측 데이터로 효과를 입증한 첫 사례라 의미가 있다.

지금의 이더리움은 모든 트랜잭션을 재실행해 검증한다. 이를 위해 전체 상태(state)를 보관해야 한다. 

한 번이라도 사용된 계정, 컨트랙트, 스토리지 슬롯은 영구 보존된다. 

상태가 커질수록 노드 운영 비용은 올라가고, 동기화 시간은 길어진다.

State Expiry란

• 일정 기간 접근되지 않은 상태를 비활성 처리한다. 

• 비활성 상태는 디스크에서 제거해 노드를 가볍게 만든다. 

• 나중에 필요하면 증명(witness)을 제출해 복원할 수 있다.

벤치마크 핵심 결과

• 전체 상태 크기: 359GB → 81GB (77.5% 감소)

• Storage trie 절감: 84.34%

• 리플레이 시간: 75.13h → 63.75h (15% 개선)

• Block insert P99 latency: 565ms → 445ms (-21%)

• Storage read P50: 10.5ms → 5.65ms (-46%)

Account는 두고 Storage만 만료시키는 방법의 가능성

Storage trie 절감(84%)이 account trie보다 훨씬 크다. 

Account는 만료시키지 않고 storage만 만료시키는 방식도 충분히 가능할 것이다.

이를 통해 절감 효과 대부분을 확보하면서 account 복구 시 UX 문제를 회피할 수 있다.

시사점

• 디스크 요구사항이 1/4 수준으로 줄 수 있다는 것은 밸리데이터나 풀노드 운영자에게 하드웨어 계획에 여유를 준다.

• 실행 속도의 증가는 밸리데이터들이 Attestation 제출 마감(4초)에 쫓기는 상황에서 블록 지연을 줄여주고, 네트워크의 안정성이 증가한다.

• 이번 벤치마크는 State Expiry가 이론이 아닌 실측 데이터로 효과를 입증한 첫 사례이기에 의미가 있다.