GSR과 폴리곤이 인큐베이팅하는 롤업 Katana의 메인넷이 출시되었습니다. 런칭 스토리나, 구조가 꽤 흥미로워 공유드립니다.

[배경 1 - Why Katana?]

폴리곤은 수년 간 ZK 기반 상호운용성 인프라인 Agglayer를 만들어왔습니다. 그런데, 고객들에게 상호운용성을 빌미로 Agglayer에 통합되는 L2를 만들자고 영업하려면, 상호운용성이 주는 명확한 혜택이 있어야 합니다. 그리고 그러한 혜택 중 하나는, 어떤 체인이든 다른 체인에 이미 존재하는 깊은 유동성에 접근할 수 있다는 점입니다. 예를 들어, 체인 A에 USDC-ETH 유동성이 깊지 않더라도, Agglayer로 연결된 다른 체인 B에서 해당 USDC-ETH 페어의 유동성이 깊다면, 크로스체인 트랜잭션을 통해 체인 A의 유저들도 쉽게 체인 B의 페어 위에서 낮은 슬리피지로 거래할 수 있게 되는 메커니즘입니다.

즉, L2 간 상호 운용성에서 중요한 것은 유동성이 깊은, 디파이 전용 체인입니다. Katana는 그러한 배경에서 폴리곤의 인큐베이팅을 받아 Agglayer 위에 올라갈 디파이 전용 체인으로 빌딩되었습니다.

[배경 2 - VaultBridge]

또한 Katana는 Agglayer의 피처인 VaultBridge를 통합합니다. VaultBridge는 롤업 브릿지에 있는 자산들을 Morpho나 Fluid와 같은 렌딩 프로토콜에 공급하여 사용자들에게 추가 수익을 주는 프로토콜로, Blast가 했던 것과 거의 유사한 메커니즘을 가지고 있습니다. 

사실 VaultBridge는 Agglayer에 도입되기 전, 작년 12월 Polygon PoS에 먼저 도입이 제안된 바 있습니다. Morpho와 Yearn 등의 프로토콜이 주도한 이 프로포절은 수익을 재투자하여 Polygon의 DeFi 생태계에 인센티브를 제공하려는 의도였지만, 보안 문제와 사용자의 선택권 부재로 인해 상당한 반발에 직면했습니다. 

특히 반발이 심했던 것은 Aave였습니다. Aave Chain Initiative (ACI) 는 해당 프로포절의 보안 문제를 언급하며, Polygon PoS에서 Aave가 완전히 탈퇴해야 한다는 프로포절을 Aave DAO에 제안했습니다. (해당 프로포절은 Polygon PoS에서 Aave 내 모든 자산군의 LTV를 0으로 설정해, 아예 자산을 빌릴 수 없도록 만드는 것이었습니다.) 결국 Aave는 올해 2월 Polygon PoS에서 완전히 옵트아웃하게 되었죠.

재미있는 점은, VaultBridge 프로포절이 올라오기 4개월 전, ACI가 [VaultBridge와 유사한 형태의 프로포절을 폴리곤 거버넌스 포럼에 올린 적이 있다는 점입니다. 이는 Aave의 반발이 보안 이슈 때문이 아니었음을 의미하며, 탈퇴 액션 뒤에는 폴리곤이 Aave의 경쟁사인 Morpho와만 협업했다는 정치적인 이유가 있었던 것이죠.

어찌 되었든 작년 12월에 올라온 Polygon PoS VaultBridge 프로포절은 커뮤니티의 반발로 거절되었으며, 현재 Katana에 적용되는 VaultBridge는 체인별로 옵트인 여부를 결정할 수 있게 한다던지, Gauntlet과 Steakhouse Financial의 리스크 매니지먼트를 도입한다던지 등 여러 가지 부분들이 보완되어 적용되어 있습니다. 

[Katana 아키텍처]

기술적으로도 Katana는 꽤 재미있는 구조를 가지고 있습니다. Polygon은 지난 5월 Agglayer에 OP Stack을 통합하였으며, Katana는 이를 도입한 첫 사례입니다. 다만 ZK 증명이 요구되는 Agglayer에 OP Stack을 그대로 쓸 순 없으며, Agglayer는 SP1 증명을 요구하기 때문에, Katana는 Succinct가 튜닝한 버전의 OP Stack인 OP Succinct를 사용합니다. 즉 Katana는 OP Stack의 기본 구조에 Succinct의 ZK 증명 메커니즘이 통합된 ZK 롤업이며, 상호 운용성 측면에서는 타 CDK 롤업과 공유 브릿지를 쓰며 Agglayer를 기반으로 한 안전한 자산의 상호 운용을 할 수 있는 롤업입니다.

다만 여기서 중요한 것은, Agglayer 상호운용성의 UX가 현재 어떠한지의 문제입니다. 현재 Agglayer의 구현에서는, Superchain Interop과 같이 초 단위로 빠른 상호운용성은 불가능한 것으로 보입니다. 

Agglayer는 pessimistic proof라는 개념을 가지고 있습니다. pessimistic proof라는 개념은, 참여하는 각 체인이 공유 브릿지의 자산에 액세스하기 위해선 ZK 증명을 제공해야 한다는 것입니다. 즉, 체인 A에서 B로의 크로스체인 트랜잭션이 이뤄지려면, 체인 A에서 크로스체인 트랜잭션이 포함된 ZK 증명이 제출되어 settle되고 난 뒤에야 대상 체인에서 자산을 클레임하거나 메세지를 실행할 수 있다는 의미입니다. 당연히, 비용 문제 등으로 ZK 증명의 제출 주기는 초 단위가 아니라 몇십 분 단위로 이뤄지기 때문에, 현재 Agglayer의 크로스체인 경험은 안전하지만 매우 느릴 가능성이 높습니다. (자료 부족으로 틀린 정보일 수 있습니다 - 잘못되었다면 지적 부탁드립니다)

Polygon 측에서는 이를 Agglayer의 다음 버전인 v0.4에서 개선하여, 10초 이내의 크로스체인 트랜잭션이 가능하도록 한다고 합니다.

Katana는 여러모로 흥미로운 시도로 보이는 듯 합니다. 앞으로 해당 체인이 어떻게 될지, 폴리곤과 Agglayer는 어떻게 나아갈지 지켜보는 것도 좋을 듯 하네요.