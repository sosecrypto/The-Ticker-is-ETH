[MEV가 스케일링의 병목이다]

플래시봇이 인상적인 리서치 결과를 발표했습니다. 결론부터 이야기하면, 프라이빗 멤풀로 인한 낮은 투명성 때문에 차익거래 봇들은 체인에 스패밍을 하게 되며, 이게 체인의 확장성에 부정적인 영향을 미칠 수 있다는 것입니다.

현재 MEV는 높은 확장성을 가진 체인들에서 '스패밍'이라는 문제를 발생시키고 있습니다. 예시는 다음과 같습니다.

1. 솔라나에서 차익거래 봇들은 블록의 40%를 채우면서 전체 수수료의 7% 밖에 지불하지 않음.

2. 상대적으로 높은 처리량을 달성하고 있는 여러 L2도 블록의 대부분이 스팸 트랜잭션. 특히, Unichain의 경우 블록의 75% 가량이 차익거래 봇들로 인한 트랜잭션.

3. 24년 11월부터 25년 2월까지 베이스가 증가시킨 11M 만큼의 블록 가스 공간은, 모두 스팸 트랜잭션으로 채워짐.

이는 1. 멤풀이 투명하지 않으며 2. 높은 확장성으로 트랜잭션을 많이 보내도 트랜잭션 수수료를 거의 내지 않기 때문에, 봇들이 '온체인에서 기회를 서칭하는' 스팸 트랜잭션을 무수히 많이 보내서 발생하는 일입니다. 이 스팸 트랜잭션의 99%는 실패하지만, 성공하는 극히 일부의 트랜잭션 덕분에 차익거래자들은 수익을 볼 수 있게 되죠. 예시는 아래와 같습니다.

이 트랜잭션은 Base에서 차익거래 기회를 찾는 데에 실패한 트랜잭션입니다. 겉보기엔 아무것도 일어나지 않은 걸로 보이나, 내부의 호출 스택을 들여다보면, 여러 DEX의 가격을 반복적으로 호출하며 차익거래 기회를 찾는 것을 확인할 수 있습니다. 즉, 이 봇은 차익거래 기회를 오프체인 로직이 아니라 컨트랙트에서 찾고 있는 것입니다.

즉, 차익거래자들은 L2의 MEV 기회를 '온체인에서 서칭'하며, 이는 L2 가스 및 DA 사용량의 상당수를 차지합니다. 이를 줄이고 그 공간을 일반 사용자들의 트랜잭션으로 채울 수 있다면, TPS는 똑같아도 실질적인 확장성을 크게 증가시킬 수 있다는 것이 플래시봇의 입장입니다.

MEV 서칭을 오프체인으로 옮겨올 수 있는 방법으로, 플래시봇은 TEE와 오프체인 경매 메커니즘을 활용하자는 제안을 하고 있습니다. 자세한 메커니즘은 다음과 같습니다. 

1. 블록 빌더가 지금 만들어지고 있는 블록 내 매 트랜잭션 마다의 상태를 서처들에게 제공합니다.

2. 서처들은 TEE 내에서 MEV 서칭 코드를 돌립니다. TEE 머신 설정을 통해 서처들은 블록 내 트랜잭션 정보를 볼 수 없지만, 본인의 코드가 누구에게도 공개되지 않은 채로 동작하고 있음은 암호학적인 증명을 통해 확신할 수 있습니다.

3. 이 코드를 통해 차익거래 (백러닝) 기회를 포착한다면, 서처는 이를 bid와 함께 블록 빌더에게 보냅니다.

4. 빌더는 가장 높은 bid를 낸 서처의 트랜잭션을 포함시켜줍니다.

이 메커니즘의 핵심은 1. 트랜잭션 정보를 서처에게 공개하지 않으면서 2. 암호학적인 증명을 통해 공평함이 보장되는 오프체인 MEV 경매라는 점입니다. 해당 메커니즘이 L2에서도 잘 동작한다면, 이를 통해 스팸의 비율을 줄이고 L2들이 실질적으로 더 높은 확장성을 확보할 수 있으리라 생각되네요. 스케일링 문제를 단순 엔지니어링이 아니라, 경제학적으로 일부 해결한다고도 볼 수 있겠습니다.

아마도, 이는 Flashbot이 밀고 있는 이니셔티브인 BuilderNet을 통해 L2들에 제공되지 않을까 싶습니다.