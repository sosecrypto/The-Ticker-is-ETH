6. EIP-8037: 스토리지 증가량 제한

이더리움 내 현재 가장 큰 병목 중 하나는, 상태 증가입니다. 가스 리밋이 올라갈수록 트랜잭션 개수와 그들이 생성하는 상태가 늘어나며, 이는 현재 약 연 124GB 수준이죠. 갈수록 노드 운영자들은 더 큰 SSD를 써야 하며, 네트워크의 장기적인 탈중앙화에 부정적이라고 볼 수 있습니다.

EIP-8037은 이 연간 상태 증가량을 100GB로 고정하기 위해, 상태 증가에 대한 별도의 가스를 도입합니다. 이제 상태를 증가시키는 SSTORE 액션의 가격은 1바이트 당 cost_per_state_byte (cpsb) 만큼으로 책정되며, 이 cost_per_state_byte는 블록 가스 리밋에 따라 동적으로 변화하게 됩니다. 예를 들어, 60M 가스에서 스토리지 하나를 생성하는 비용은 24,000 가스이지만, 120M 가스에서 똑같은 액션의 비용은 48,000 가스가 되죠. 이러한 제약은 SSTORE 뿐만 아니라, 계정 생성이나 컨트랙트 배포에도 적용됩니다.

또한 EIP-8037은 단순히 상태 생성 비용을 조정하는 데서 그치지 않고, 가스를 두 개의 차원으로 분리하는 다차원 가스(multidimensional gas) 모델을 도입합니다. 기존 이더리움에서는 모든 연산이 하나의 gas 값으로 측정되었기 때문에, CPU 연산과 영구 상태 증가처럼 성격이 완전히 다른 자원이 동일한 한도 아래 관리되었습니다. 그러나 EIP-8037 이후에는 가스가 일반 가스(연산·실행 비용) 상태 가스(영구 상태 생성 비용)로 나뉘어 각각 별도로 측정됩니다. 트랜잭션은 두 종류의 가스를 모두 소비하며, 블록이 가득 찼는지 여부 역시 단일 gas 사용량이 아니라 두 가스 차원 중 가장 먼저 한도에 도달한 자원을 기준으로 판단됩니다. 이를 통해 연산 처리량은 늘리면서도 상태 증가 속도는 일정 수준으로 제한할 수 있어, 블록 가스 리밋을 높이면서도 장기적인 상태 폭증을 방지하는 구조가 만들어집니다.

하지만, EIP-8037은 트랜잭션 타입을 바꾸진 않기 때문에, 트랜잭션은 여전히 하나의 가스 리밋만 가지게 됩니다. EIP-8037은 이를 구현하기 위해 reservoir(저수지) 모델이라는 내부 회계 방식을 도입합니다. 트랜잭션 실행 시 사용 가능한 가스는 먼저 일반 가스 예산과 상태 가스 전용 저장소(state gas reservoir)로 나뉘며, 상태 생성 비용은 이 reservoir에서 우선 차감됩니다. reservoir가 소진된 이후에만 일반 가스에서 추가로 차감되며, 반대로 일반 연산은 reservoir를 사용할 수 없습니다. 이 구조 덕분에 사용자 인터페이스나 트랜잭션 형식은 그대로 유지하면서도, 프로토콜 내부에서는 두 자원을 독립적으로 제한할 수 있게 됩니다.

해당 제안은 상태 증가라는 중요한 병목을 직접적으로 다루는, 이더리움 확장에 매우 중요한 제안이기는 하나, 앱 개발자들 입장에서 가스 예측을 어렵게 만든다는 단점이 있습니다. 예를 들어, 지금 트랜잭션과, 이더리움이 N배 확장된 상태의 트랜잭션의 비용이 크게 달라질 수 있으며, 새로운 애플리케이션을 개발할 때 이를 고려해야만 하죠. 물론 이러한 제약이 장기적으로 적용되진 않을 것이며, 이더리움 L1의 ZK화 및 무상태(statelessness) 로드맵이 구현된다면 이러한 제약은 크게 낮아지리라 예상되지만, 단기적으로는 신경써야 하는 부분이 늘어날 것이라 생각됩니다.

앱 개발자 분들은 해당 부분을 꼭 확인하여, 기존 혹은 신규 서비스의 비용 변화를 예상해보시길 바랍니다.

7. EIP-8038: 상태 접근 비용 증가

이더리움의 상태의 전체 크기가 지속적으로 커지면서, 상태에 접근할 때의 비용이나 레이턴시 역시 증가하고 있습니다. 그러나 몇 년간 이더리움의 상태 접근(SLOAD) 비용은 그대로였죠. 

EIP-8038은 이 비용을 현재 상태에 맞게 조정하는 것을 목표로 하고 있습니다. 특히 트랜잭션 내에서 스토리지에 처음 접근하는 콜드 액세스부터, 코드를 복사하는 EXTCODECOPY 등 전반적인 상태 읽기의 비용이 전반적으로 조정될 예정입니다. 다만 아직 벤치마크가 완료되지 않아 조정이 얼마나 될지는 미지수로 보이네요.

이 변경이 적용되면, 상태에 자주 접근하는 앱들은 비용이 소폭 상승할 것으로 예상됩니다.

이러한 변경들은 앱 개발자뿐만 아니라, 이더리움 L1 및 L2 노드 운영자, 그리고 더 나아가 EVM 동등성을 갖춘 체인까지 이더리움/비이더리움 생태계 전반에 있어 매우 큰 영향을 미칠 수 있는 조정입니다. 그렇기 때문에 현재 이더리움 재단은 설문을 통해, 위 변화에 다들 얼만큼 영향을 받는지, 어떤 부분에서 만족 혹은 불만족스러운지를 평가하고, 해당 EIP들을 글램스터담에 포함시킬지 결정하려고 합니다.

이더리움 및 L2 혹은 기타 EVM 동등성을 갖춘 체인에서 빌딩하시는 빌더분들이나, 혹은 그런 체인을 운영하시는 빌더분들은 꼭 아래 설문에 참여하여 의견을 내보시길 바라겠습니다!

[https://docs.google.com/forms/d/e/1FAIpQLScmhDCX1I8-RPFL-AEEBJkBkAtbCq_M9quXHspF_OltTbGCGw/viewform](https://docs.google.com/forms/d/e/1FAIpQLScmhDCX1I8-RPFL-AEEBJkBkAtbCq_M9quXHspF_OltTbGCGw/viewform)