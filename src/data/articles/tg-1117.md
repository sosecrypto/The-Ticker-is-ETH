아비트럼은 지난 1월 8일 ArbOS Dia 업그레이드를 통해 네트워크 효율성과 사용자 경험을 한 단계 끌어올렸습니다. 해당 업데이트는 특히 동적 가스 가격 책정(Dynamic Gas Pricing) 메커니즘의 기반을 마련했다는 점에서 의미가 큽니다.

이번 글에서는 ArbOS Dia 업그레이드의 핵심 변화와, 동적 가스 가격 모델이 아비트럼 생태계에 어떤 영향을 미치는지 자세히 살펴보겠습니다.

[배경 지식: 다차원 가스 미터링]

다차원 가스 미터링은 이더리움의 스케일링을 위해 활발히 연구되고 있는 주제입니다. 이는 현재의 단일 가스 미터링 방식을 개선해 리소스별로 별도의 가스 제한을 두자는 아이디어이죠. 

기존 이더리움에서는 하나의 가스 한도 안에서 CPU, 메모리, 스토리지, 네트워크 대역폭이 모두 경쟁하는 구조였습니다. 예를 들어, 노드가 16GB의 메모리와 10Mbps의 네트워크 대역폭을 보유하고 있더라도, 한쪽 리소스(네트워크)를 많이 쓰는 연산이 포함되면 다른 리소스(메모리)는 충분히 활용되지 못합니다. 

이는 노드가 가진 자원을 온전히 활용하지 못하게 하여, 잠재적인 확장성을 제한하는 요인이 됩니다. 다차원 가스 모델은 이러한 문제를 해결하기 위해, 각 리소스(예: CPU, 메모리, 네트워크)에 개별적인 가스 리밋을 설정함으로써 노드의 자원을 최대한 활용하고, 결과적으로 네트워크의 확장성을 높이는 것을 목표로 합니다.

[이더리움의 다차원 가스 논의: 글램스터담에서의 EIP-8037]

이더리움 역시 다차원 가스 모델에 대한 논의를 본격적으로 이어가고 있으며, 그 일환으로 현재 글램스터담 업그레이드에 포함되는 것을 목표로 EIP-8037이 제안되어 있습니다.

EIP-8037은 기존의 단일 가스 모델에 더해, 상태 생성(state growth)을 별도의 자원 차원으로 분리해 측정하는 접근을 제안합니다. 현재 이더리움의 가장 큰 목적 중 하나인 ‘Scale L1’을 달성하기 위해, 블록 가스 한도를 늘려 처리량을 높이려 하면, 연산 자원뿐 아니라 상태 데이터베이스의 크기까지 함께 빠르게 증가하는 문제가 발생했습니다. 이는 노드의 디스크 사용량과 동기화 비용을 키워 장기적으로 탈중앙성을 위협할 수 있습니다.

EIP-8037은 이 문제를 해결하기 위해 제안되었습니다. EIP-8037은 연산 자원에 대한 가스(regular gas)와, 새로운 계정 생성·스토리지 슬롯 추가/컨트랙트 코드 배포처럼 상태를 실제로 증가시키는 행위에 대한 가스(state gas)를 구분해 각각을 별도로 측정합니다. 특히 상태 생성 비용을 바이트 단위 가격(cpsb)으로 표준화하고, 블록 가스 한도가 증가할수록 이 단가도 함께 증가되도록 설계함으로써, 블록이 커지더라도 연간 상태 증가량은 일정 범위 내로 억제되도록 합니다. 다시 말해, 연산 확장과 상태 확장을 같은 축에서 다루지 않고 분리함으로써, 네트워크 자원을 보다 균형 있게 활용하겠다는 철학입니다.

결국 EIP-8037은 다차원 가스 미터링을 통해 연산 자원과 영구 저장 자원을 구조적으로 분리하고, 스케일링 과정에서 발생할 수 있는 상태 폭증 문제를 통제하려는 시도라고 볼 수 있습니다.

[아비트럼의 다차원 가스 모델]

아비트럼은 향후 이 다차원 가스를 도입하여 더욱 효율적인 스케일링을 가능하게끔 하려고 하며, 이를 위해 이번 Dia 업그레이드를 통해 각 리소스에 대한 가스 정보를 수집하기 시작했습니다. 이전에는 ‘블록마다 X 가스를 사용한다’만 알 수 있었다면, 이제는 ‘상태 증가에 X 가스, 컴퓨팅 리소스에 Y 가스, 히스토리 증가에 Z 가스를 사용한다’를 알 수 있게 되는 것이죠. 이 정보들이 쌓이는 것을 기반으로, 아비트럼은 향후 다차원 가스를 도입할 때 어떤 리소스에 대해 어떤 가스 리밋과 가스 증가 비율을 사용할지 선택할 수 있게 되겠죠.

[아비트럼의 변화된 가스 모델]

Dia 업그레이드에서 주요한 변경 사항 중 하나는, 혼잡 시 가스비 증가를 보다 완만하고 예측 가능하게 조정하는 구조로 개편했다는 점입니다.

기존 아비트럼에는 단일 가스 타겟(예: 7 MGas/s)과 짧은 조정 윈도우를 기준으로 EIP-1559 유사 알고리즘이 존재해, 수요가 타겟을 초과할 경우 기본 수수료가 비교적 빠르게 상승했습니다. 이 구조는 평시에는 효율적이었지만, 트래픽이 급증하는 순간 가스 스파이크 현상을 야기했습니다. 작년 10월 10일 트래픽 급증 때, 아비트럼의 평균 가스비는 40 gwei를 넘었었죠.

Dia 업그레이드는 여러 개의 가스 타겟과 서로 다른 조정 윈도우를 결합한 다층 구조를 도입했습니다. 낮은 가스 타겟은 긴 조정 윈도우를 통해 장기적인 평균 수요에 천천히 반응하고, 높은 가스 타겟은 짧은 조정 윈도우를 통해 급격한 수요 변화를 빠르게 흡수합니다. 이처럼 서로 다른 시간 축에서 작동하는 조정 메커니즘이 동시에 작동함으로써, 가격 상승이 한 번에 집중적으로 반영되지 않고 단계적으로 분산됩니다.

그 결과, 동일한 수요 급증 상황에서도 가스비가 급격히 치솟는 대신 점진적으로 조정되며, 혼잡의 빈도와 강도가 모두 완화되는 효과를 기대할 수 있습니다. 실제로, 1월 31일 아비트럼은 순간 1100 TPS 이상을 처리하는 등 높은 트래픽을 맞았으나, 가스비 증가는 매우 미미했죠.

정리하자면, 이더리움 L1은 가스 리밋 증가로 인한 과도한 상태 증가를 제한하기 위한 형태의 부분적인 다차원 가스 모델을 도입하려고 하고 있으며, L2들은 후사카 업그레이드로 데이터 병목이 해결되어, 실행 측의 병목을 해결하기 위한 설계들을 고려하고 있는 모습입니다. 앞으로 다차원 가스 모델이 본격적으로 도입된다면, L1와 L2 통틀어 확장성 증가가 얼마나 이뤄질 수 있을지 궁금하네요.

한 가지 생각해볼 만한 점은, L2들의 확장성이 높아질수록, L2들의 경제성은 낮아진다는 점입니다. 결국 L2들은 단순한 가스 수수료가 아니라

- MEV 캡처를 통한 추가 수수료 (PGA, TimeBoost 및 기타 MEV 옥션)

- 체인이 아닌, 앱을 통한 수익 추구 (Lighter, Base)

등의 전략을 계속해서 고민해야 하지 않을까 싶네요.