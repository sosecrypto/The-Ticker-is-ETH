[Unichain, TEE 블록 빌더 활성화]

유니체인이 이제부터 TEE 내에서 블록을 빌딩한다고 합니다. 이에 대한 설명은 다음과 같습니다.

<배경 지식 1: TEE>

TEE는 컴퓨터 내부의 격리 환경을 바탕으로, 특정 기기 내에서 동작하는 애플리케이션이 '조작되지 않았고, 내가 아는 그 애플리케이션'임을 증명할 수 있도록 하는 기술입니다. Intel이나 AMD와 같은 하드웨어 제조사가 기기를 조작해 출시하지 않았음을 믿어야 하긴 하지만, 운영자의 악의적인 개입이 불가능해 어느 정도는 믿고 사용할 수 있다는 장점이 있습니다.

<배경 지식 2: MEV Tax>

MEV Tax는 애플리케이션이 MEV를 직접 캡처할 수 있게끔 하는 방식입니다. EVM에는 우선 수수료라는 것이 있으며, OP Stack L2들은 이를 많이 내면 낼 수록 블록 내에서 먼저 트랜잭션을 실행해주는, 우선 수수료 순의 트랜잭션 정렬 방식을 택하고 있습니다.

이때 우선 수수료를 기반으로 앱이 스마트 컨트랙트를 통해 '옥션'을 실행한다면, 앱은 MEV를 효과적으로 캡처할 수 있게 됩니다. 옥션 스마트 컨트랙트에서 한 블록 내에 가장 먼저 실행되는 트랜잭션은 우선 수수료를 가장 많이 낸 트랜잭션일 것이며, 이 수수료 값을 컨트랙트에서 bid로 활용하고 일부를 떼어가는 방식입니다. 이를 MEV Tax라고 합니다. (참고)

위 두 내용을 기반으로 한 요점은 다음과 같습니다.

1. MEV Tax를 통해 앱들은 MEV를 캡처할 수 있다.

2. 그러려면 한 블록 내에서 우선 수수료 순으로 트랜잭션이 정렬되어야만 한다.

OP Stack 체인들은 우선 수수료 순으로 트랜잭션을 정렬하고는 있으나, 이는 강제되는 것이 아니며, 시퀀서가 마음대로 언제든지 조정할 수 있습니다.

따라서, Unichain은 TEE를 '블록 내 트랜잭션 정렬 방식을 보장'하는 데에 사용합니다. 운영 주체인 시퀀서 조차도 블록의 트랜잭션 정렬 방식을 변경할 수 없도록 만들어서, 앱들이 MEV Tax를 통해 MEV를 trustless한 방식으로 캡처할 수 있도록 만든다는 의미이죠.

즉 현재의 Unichain은 'App specific sequencing' 혹은 '앱들이 MEV 수익을 캡처'하기 좋은 환경을 구축해둔 것입니다. 캡처한 MEV를 사용자에게 다시 나눠주는 방식으로 사용자에게 더 나은 수익을 제공해줄 수도 있습니다.

<한계: 검열 방지 불가>

다만 여기서도 한계는 존재합니다. TEE블록 빌더는 '우선 수수료 정렬' 로직 자체를 강제하긴 하지만, 블록 빌딩에 검열이 발생하지 않음을 강제할 수는 없습니다. 즉, Unichain의 시퀀서는 MEV Tax 옥션 관련 트랜잭션을 모두 검열하고 본인의 bid를 매우 낮은 값으로 넣어 MEV를 추출할 수 있습니다.

이를 해결하려면 트랜잭션을 암호화하는 encrypted mempool이 필수적인데, 이 역시 TEE를 통해 구현될 수 있습니다.

위 인프라는 Flashbot이 만들었으며, 수 년간의 TEE 빌딩 경험을 바탕으로 TEE를 적재적소에 잘 사용한 케이스라고 볼 수 있겠습니다.